import{_ as D,u as R,a as A,r as l,q as j,o as z,b as F,c as _,d as m,e as u,f as t,w as b,j as h,n as i,t as c,s as g,v as p,F as N,g as E,h as J}from"./index-faa7e4d1.js";import{H as X,F as G,a as K}from"./api-service-67937f2f.js";import{A as Q}from"./AppliedMenu-2193cab1.js";import{c as I}from"./cart-service-4a0913f8.js";const W="/assets/img/contact_banner.png",Y={components:{Header:X,Footer:G,AppliedMenu:Q},setup(){const a=R(),{locale:e}=A(),C=l(""),o=l(""),k=l(""),w=l(""),f=l(""),s=l([]),v=l(!1),n=l(!1),{executeRecaptcha:M,recaptchaLoaded:r}=j(),O=async V=>{await I.removeCart(V),s.value=I.getCart()},H=l({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),P=()=>{s.value=I.getCart()},T=async()=>{v.value=!0,await r();const V=await M("submit");let q=[];for(let d in s.value){let L=s.value[d].product.product_detail.find(y=>y.language==e.value&&y.meta_key=="title").meta_value??"",B=s.value[d].category.length>0?s.value[d].category[0].get_title_attribute.find(y=>y.language==e.value).meta_value:"";q.push({title:L,category:B,id:s.value[d].product.id})}const S=await K.sendContact({contact_name:C.value,contact_company:o.value,contact_phone:k.value,contact_email:w.value,contact_content:f.value,cart:JSON.stringify(q),recaptcha_token:V});if(H.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},S.hasOwnProperty("errors"))for(let d in S.errors)H.value[d]=!0;v.value=!1,S.hasOwnProperty("success")&&(n.value=!0)},U=()=>{a.push({name:"home"})};return z(()=>{P()}),{locale:e,contact_name:C,contact_company:o,contact_phone:k,contact_email:w,contact_content:f,removeCartItem:O,cartItem:s,submitContact:T,errorMsg:H,isModalOpen:n,goHome:U,isSending:v}}},Z={id:"applied"},x=t("div",{class:"banner"},[t("img",{src:W,alt:""})],-1),$={class:"gray-background"},tt={class:"white-rounded-background"},ot={class:"container"},nt={class:"row"},et={class:"col-12 list",id:"contact_content"},at={class:"row"},ct={class:"col-12 route"},st=t("span",{class:"material-icons"},"",-1),lt={class:"col-12"},it={class:"contact-container"},rt={class:"row"},dt=["innerHTML"],_t={class:"row"},mt={for:"contact_name"},ut={for:"contact_company"},ht={class:"row"},vt={for:"contact_phone"},gt={for:"contact_email"},pt={class:"row"},ft={class:"col-12"},yt={for:"contact_content"},bt={class:"col-12"},Ct={class:"contact-container"},kt=t("hr",null,null,-1),wt={class:"row mt-3"},Mt={class:"col-12 secondHeading"},Ht={class:"row mt-3"},Vt={class:"row"},St={class:"col-10"},Ft=["onClick"],It=t("div",null,"X",-1),qt=[It],Nt=t("hr",null,null,-1),Ot={class:"row mt-3"},Pt={class:"col-12"},Tt={key:1,class:"btn btn-secondary"},Ut={key:0,class:"modal",style:{display:"block"}},Lt={class:"modal-dialog"},Bt={class:"modal-content"},Dt={class:"modal-header"},Rt={class:"modal-title"},At={class:"modal-body"},jt={class:"modal-footer"};function zt(a,e,C,o,k,w){const f=F("Header"),s=F("router-link"),v=F("Footer");return _(),m(N,null,[u(f),t("main",Z,[x,t("div",$,[t("div",tt,[t("div",ot,[t("div",nt,[t("div",et,[t("div",at,[t("div",ct,[st,u(s,{to:{name:"home"}},{default:b(()=>[h(c(a.$t("header.index")),1)]),_:1}),h(" / "),u(s,{to:{name:"contact"}},{default:b(()=>[h(c(a.$t("header.contact")),1)]),_:1})]),t("form",null,[t("div",lt,[t("div",it,[t("div",rt,[t("div",{class:"col-12 heading",innerHTML:a.$t("contact.heading")},null,8,dt)]),t("div",_t,[t("div",{class:i(["col-sm-6 col-12 required",o.contact_name.length>0?"hasContent":""])},[t("label",mt,c(o.contact_name.length==0?a.$t("contact.name"):""),1),g(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":e[0]||(e[0]=n=>o.contact_name=n),class:i(["form-control",o.errorMsg.contact_name?"error":""])},null,2),[[p,o.contact_name]])],2),t("div",{class:i(["col-sm-6 col-12 required",o.contact_company.length>0?"hasContent":""])},[t("label",ut,c(o.contact_company.length==0?a.$t("contact.company"):""),1),g(t("input",{type:"text",class:i(["form-control",o.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":e[1]||(e[1]=n=>o.contact_company=n),name:"contact_company"},null,2),[[p,o.contact_company]])],2)]),t("div",ht,[t("div",{class:i(["col-sm-6 col-12 required",o.contact_phone.length>0?"hasContent":""])},[t("label",vt,c(o.contact_phone.length==0?a.$t("contact.phone"):""),1),g(t("input",{type:"text",class:i(["form-control",o.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":e[2]||(e[2]=n=>o.contact_phone=n),name:"contact_phone"},null,2),[[p,o.contact_phone]])],2),t("div",{class:i(["col-sm-6 col-12 required",o.contact_email.length>0?"hasContent":""])},[t("label",gt,c(o.contact_email.length==0?a.$t("contact.email"):""),1),g(t("input",{type:"email",class:i(["form-control",o.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":e[3]||(e[3]=n=>o.contact_email=n),name:"contact_email"},null,2),[[p,o.contact_email]])],2)]),t("div",pt,[t("div",ft,[t("label",yt,c(o.contact_content.length==0?a.$t("contact.content"):""),1),g(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content","onUpdate:modelValue":e[4]||(e[4]=n=>o.contact_content=n)},null,512),[[p,o.contact_content]])])])])]),t("div",bt,[t("div",Ct,[kt,t("div",wt,[t("div",Mt,c(a.$t("contact.askingPrice")),1)]),t("div",Ht,[(_(!0),m(N,null,E(o.cartItem,(n,M)=>(_(),m("div",{class:"col-12 askPriceContent",key:M},[t("div",Vt,[t("div",St,[h(" ・"),u(s,{to:{name:"category-product",params:{categoryID:n.product.category_id}},class:"category"},{default:b(()=>[h(c(n.category.length>0?n.category[0].get_title_attribute.find(r=>r.language==o.locale).meta_value:""),1)]),_:2},1032,["to"]),u(s,{class:"product",to:{name:"product-detail",params:{id:n.product.id}}},{default:b(()=>[h(" > "+c(n.product.product_detail.find(r=>r.language==o.locale&&r.meta_key=="title").meta_value??""),1)]),_:2},1032,["to"])]),t("div",{class:"col-2 remove",onClick:r=>o.removeCartItem(n.product.id)},qt,8,Ft)])]))),128))]),Nt,t("div",Ot,[t("div",Pt,[o.isSending?(_(),m("div",Tt,c(a.$t("contact.isSending")),1)):(_(),m("div",{key:0,class:"btn btn-danger",onClick:e[5]||(e[5]=n=>o.submitContact())},c(a.$t("contact.submit")),1))])])])])])])])])])])])]),o.isModalOpen?(_(),m("div",Ut,[t("div",Lt,[t("div",Bt,[t("div",Dt,[t("h5",Rt,c(a.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:e[6]||(e[6]=n=>o.goHome())})]),t("div",At,[t("p",null,c(a.$t("contact.success")),1)]),t("div",jt,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[7]||(e[7]=n=>o.goHome())},c(a.$t("contact.close")),1)])])])])):J("",!0),u(v)],64)}const Kt=D(Y,[["render",zt]]);export{Kt as default};
